20150327:
http://www.yiichina.com/doc/guide/2.0/start-workflow
http://www.yiiframework.com/download/
http://www.yiichina.com/doc/guide


http://localhost:8084/index.php?r=entry/index
http://localhost:8084/index.php?r=admin/entry/index
Yii::trace('AAA');

yii2中文显示问题，显示为乱码？
app\controllers\entry\EntryController为何不起作用？->http://localhost:8084/index.php?r=admin/entry/index
能否有多个入口脚本？

20150330:
<?php var_dump(__DIR__)?>
<?php var_dump(dirname(__DIR__))?>
<?= __DIR__?>
<?php echo __DIR__?>

http://php.net/manual/en/

设置时区：
<?php 
    date_default_timezone_set('PRC');
    echo date('Y-m-d H:i:s')
    ?>
<?php var_dump($this);?>
 $this->layout='@app/views/layouts/manager.php';
throw new \yii\base\Exception();
throw new \yii\web\NotFoundHttpException;
 \yii\web\User()与app\models\User的区别？
http://localhost:8084/index.php?r=entry/add-user

//能否绑定多个对象

 <?= $form->field($model, 'name') ->label('姓名:') ?> 
 等价于
 <input type="text" id="entryform-name" class="form-control" name="EntryForm[name]">
 ，关键是name="EntryForm[name]"需要一致，这样controller都可以正确接收到值
 
controller参数为数组：  
http://localhost:8084/index.php?r=entry/add-users&id[0]=3&id[1]=4&id[3]=5

20150331:
——————————————————————————————————
YII2.0 如何去掉URL中的index.php？
1、apache的httpd.conf中去掉LoadModule rewrite_module modules/mod_rewrite.so注释；
2、http.conf网站设置AllowOverride None改为AllowOverride All
3、yii2应用程序框架中'components'增加：
'urlManager' => [
    		'enablePrettyUrl' => true,
    		'showScriptName' => false,//隐藏index.php
    		//'enableStrictParsing' => false,
    		//'suffix' => '.html',//后缀，如果设置了此项，那么浏览器地址栏就必须带上.html后缀，否则会报404错误
    		'rules' => [
    			//'<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
    			],
    		],
4、在index.php同级目录中增加.htaccess文件，内容如下：
Options +FollowSymLinks
IndexIgnore */*
RewriteEngine on

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php
RewriteRule . index.php
————————————————————————

http://localhost:8084/entry/index      		

return $this->renderPartial('index', ['model' => $model]);

foreach ($model as $key => $value) {
	echo $key.'->'.$value.'</br>';
}

echo ($request->post("EntryForm")["name"]);

20150401:
在应用配置中增加:
'modules' => [
    'admin' => [
        'class' => 'app\modules\admin\Module',
    ],
]
http://localhost:8084/admin/default/index

yii的多语言配置：
————————————————————————————————————————————————————————
<?php echo \Yii::t('app', '测试中文');?>
<?php echo \Yii::t('app', 'name_label');?>
Yii::$app->language='zh-CN';
1、在web.php中配置
'i18n' => [
    			'translations' => [
    				'app*' => [
    							'class' => 'yii\i18n\PhpMessageSource',
    							//'basePath' => '@app/messages',
    							//'sourceLanguage' => 'en-US',
    							'fileMap' => [
    									'app' => 'app.php',
    									'app/error' => 'error.php',
    						],
    					],
    			],
    	],
2、增加文件@app/messages/zh-CN/app.php,如果为ru-RU则增加文件@app/messages/ru-RU/app.php；

3、输入内容
return [
		'name_label'=>'姓名',
		'email_label'=>'邮箱',
];
——————————————————————————————————————————————————————————
Yii::$app->getSession()->get($key)
Yii::$app->getRequest()->get($key);
Yii::$app->response->redirect("/site/index");

yii与jquery?

Url的解析？
Log如何输出到文件？->配置log组件输出到文件。
Activerecord行为的作用？
事件的作用？
系统预定义的别名在哪个文件中定义？
Db事务处理？
Jquery ui如何使用？
文件上传？


20150402:
composer安装：
1) windows:
C:\bin>php -r "readfile('https://getcomposer.org/installer');" | php
创建空的composer.bat
C:\bin>echo @php "%~dp0composer.phar" %*>composer.bat
C:\Users\username>composer -V
2) linuix:
curl -sS https://getcomposer.org/installer | php
or
php -r "readfile('https://getcomposer.org/installer');" | php

yii安装与升级：
php composer.phar create-project yiisoft/yii2-app-basic basic 2.0.3
php composer.phar create-project yiisoft/yii2-app-advanced advanced 2.0.3
php composer.phar require yiisoft/yii2 2.0.3
php composer.phar require --prefer-dist yiisoft/yii2 2.0.3 


window环境下更新至最新版本：
composer require yiisoft/yii2 2.0.3

yii2-jui安装：
php composer.phar create-project yiisoft/yii2-jui
或者
在composer.json的加入"require": {"yiisoft/yii2-jui": "~2.0.0"}

yii2-captcha安装：
php composer.phar require --prefer-dist mdmsoft/yii2-captcha "*"
或者
在composer.json的加入"require": {"mdmsoft/yii2-captcha": "*"}

bower-asset/jquery-ui: 1.11.*@stable
<?php var_dump($model->name)?>
 <?php 
    	echo DatePicker::widget(
    		[
    			'name'  => 'from_date',
    ])?>

create database yii;
create user yii identified by 'yii';
grant all privileges on yii.* to yii@localhost identified by 'yii';    	

grant all privileges on lulucms.* to yii@localhost identified by 'yii';  

在filter中统一设置controller的layout:
Yii::$app->controller->layout='@app/views/layouts/manager.php';


2015-04-03:
/* $connection =Yii::$app->db;		
		$trans = $connection->beginTransaction();
		try {
			
			$trans->commit();
		} catch (Exception $e) {
			$trans ->rollBack();
		} */

$connection =Yii::$app->db;				
		$connection->open();
		$tables= $connection->schema->getTableNames();		
		$command = $connection->createCommand("select * from t_drp_material_type where id = :id");
// 		$command->addColumn($table, $column, $type)
// 		$command->createTable($table, $columns)
		$command->bindValue(":id", 1);
		$results= $command->query();
		$connection->close();
				
通过配置[[yii\db\Connection]]可以实现数据库复制和读写分离
->如何配置？
crud:
Model Class:
app\models\DrpMaterialType
app\models\system\AdInfo

Search Model Class:
app\models\DrpMaterialTypeSearch

Controller Class:
app\modules\admin\controllers\DrpMaterialTypeController
app\modules\admin\controllers\system\AdInfoController

View Path:
@app/modules/admin/views/drp-material-type
@app/modules/admin/views/system/ad-info


gii Code Template增加

DrpMaterialType::findBySql这个函数貌似有问题，加入条件时，条件不起作用？

如何将sql查询出的结果写入到activerecord中？

http://ysk.dlysmc.com/new/mobile.html
itms-services://?action=download-manifest&url=https://app.boruicx.com/yunshang/yunshangke.plist


2015-04-07:
输出model对象
id:<?=$model->id?></br>
code:<?=$model->code?></br>
name:<?=$model->name?></br>

输出数组
id:<?=$model['id']?></br>
code:<?=$model['code']?></br>
name:<?=$model['name']?></br>

foreach ($model as $key => $value) {
// 	var_dump($key);
	var_dump($value);
}

view:
<?php foreach ($model as $key => $value) {?>
<tr>
	<td><?=$value['id']?></td>
	<td><?=$value['code']?></td>
	<td><?=$value['name']?></td>
</tr>
<?php } ?>

云商客：
1、系统登录，并记住密码
2、我的消息（消息与专题）
3、个人中心
3.1 会员等级
3.2 基本资料（
问题：如何认证我的资料？
银行卡的作用是什么？
我的资金托管在什么地方？
结算时如何提取到我的银行卡？
财务通账号的作用是什么？）




http://t.cn/RAxwqZ9
->
http://test.ysk.dlysmc.com/wap.php/reg/index/invite_mobile/13724346621


http://ysk.dlysmc.com/new/mobile.html

微店主站：
http://t.cn/RAxw5D3

操作手册：
http://www.xmgasy.com/yswd/index.html


腾付通
易宝支付

1\t_ad_info
http://localhost:8085/index.php?r=admin/system/ad-info/index


app\models\product\ProductType
app\modules\admin\controllers\product\ProductTypeController
@app/modules/admin/views/product/product-type
http://localhost:8085/index.php?r=admin/product/product-type/index

app\models\product\Product
app\modules\admin\controllers\product\ProducController
@app/modules/admin/views/product/product
http://localhost:8085/index.php?r=admin/product/product/index

app\models\vip\Vip
app\modules\admin\controllers\vip\VipController
@app/modules/admin/views/vip/vip
http://localhost:8085/index.php?r=admin/vip/vip/index

app\models\order\SoSheet
app\modules\admin\controllers\order\SoSheetController
@app/modules/admin/views/order/so-sheet
http://localhost:8085/index.php?r=admin/order/so-sheet/index

app\models\basic\PayType
app\modules\admin\controllers\basic\PayTypeController
@app/modules/admin/views/basic/pay-type
http://localhost:8085/index.php?r=admin/basic/pay-type/index

app\models\basic\DeliveryType
app\modules\admin\controllers\basic\DeliveryTypeController
@app/modules/admin/views/basic/delivery-type
http://localhost:8085/index.php?r=admin/basic/delivery-type/index

app\models\finance\VipWithdrawFlow
app\modules\admin\controllers\finance\VipWithdrawFlowController
@app/modules/admin/views/finance/vip-withdraw-flow
http://localhost:8085/index.php?r=admin/finance/vip-withdraw-flow/index

app\models\system\SheetType
app\modules\admin\controllers\system\SheetTypeController
@app/modules/admin/views/system/sheet-type
http://localhost:8085/index.php?r=admin/system/sheet-type/index

app\models\system\Parameter
app\modules\admin\controllers\system\ParameterController
@app/modules/admin/views/system/parameter
http://localhost:8085/index.php?r=admin/system/parameter/index


--api module
app\modules\api\Module
http://localhost:8085/index.php?r=api/default/index

app\modules\sale\Module
http://localhost:8085/index.php?r=sale/default/index

crontab  -e

$this->registerJsFile("@web/js/jquery-11.js");
$this->registerCssFile("@web/js/jquery-11.css");


150609:
php表单：

普通模式：		
<form action="<?= Url::toRoute('vip-login/index')?>" class="form-wrap ajax-form" method="post">
			<fieldset>
				<div class="field">
					<input name="VipLoginForm[vip_no]" class="mobile" 
						placeholder="请输入手机号" data-role="mobile" type="tel" value=<?php echo $model->vip_no?>>
				</div>
				<div class="field">
					<input name="VipLoginForm[password]" class="mobile" 
						placeholder="请输入密码" data-role="mobile" type="tel" value=<?php echo $model->password?>>
				</div>
				
				<div class="btn-wrap">
					<input name="submit" class="btn btn-orange" id="submit" value="登录"
						type="submit"> <input name="url"
						value="L3dhcC5waHAvd2ViL2dvb2RzL2dpZC8xMjg5MS5odG1s" type="hidden">
				</div>
			</fieldset>
		</form>
		
ActiveForm模式：		
		<div class="form-wrap ajax-form">
		<?php $form = ActiveForm::begin(['action' => ['vip_login/login'],'method'=>'post',]); ?>
			<fieldset>
				<div class="field">
			<?= $form->field($model, 'vip_no')->textInput(['maxlength' => 10,'placeholder'=>'请输入手机号','class'=>'mobile'])?>
			</div>

				<div class="field">
   			<?= $form->field($model, 'password')->textInput(['maxlength' => 60,'placeholder'=>'请输入密码','class'=>'mobile'])?>
   			</div>
			</fieldset>
			<div class="btn-wrap">
	    	 <?= Html::submitButton('登录', ['class' => 'btn btn-orange'])?>
	    </div>
		<?php ActiveForm::end(); ?>
		</div>		

<?php var_dump($model->getErrors());?>
<?php foreach ($model->getErrors() as $value) {
    			echo $value;
    		}?>
    		
<?php $this->registerJs(
    '$("document").ready(function(){ alert("hi"); });'
);?>

http://172.16.33.252:8085/index.php

r=sale%2Fvip-order%2Fcontact

http://q.cnblogs.com/q/45695/



短信接口：
www.ihuyi.com

用户名：cf_zff  
密码：agpW7c
验证码登录地址：http://106.ihuyi.cn/a
这个是账号密码

cf_tiger_guo
123456


微信支付：
wiriclub@126.com 
密码 zff16888 


支付宝支付：
wiriclub@163.com 
密码 zff16888 

public function rules()
    {
        return [
            [['password','re_password','new_password'], 'string','min'=>6, 'max' => 16,'message'=>'{attribute}位数为6至16位'],
            [['phone'], 'unique','message'=>'{attribute}已经被占用了'],
            ['phone','match','pattern'=>'/^1[0-9]{10}$/','message'=>'{attribute}必须为1开头的11位纯数字'],
            [['phone','password'],'required','on'=>'login','message'=>'{attribute}不能为空'],
            ['re_password','compare','compareAttribute'=>'password','message'=>'两次密码不一致'],
        ];
    }
    

 150611：
 自定义404页面
 
 $userHost = Yii::$app->request->userHost; 
$userIP = Yii::$app->request->userIP;

echo $_REQUEST['r'];
echo Yii::$app->request->get('r');

alipay api url:
http://open.alipay.com/index.htm
https://openhome.alipay.com/doc/docIndex.htm?url=https://openhome.alipay.com/doc/viewKbDoc.htm?key=236698&type=cat

weixin api url:
http://pay.weixin.qq.com/wiki/doc/api/app.php?chapter=11_1

$model->addError('vip_no',$vip->getErrors('vip_no')[0]);

http://t.cn/RAjJtmz

http://172.16.33.252:8085/index.php?r=sale/vip-login/index
http://172.16.33.252:8085/index.php?r=api/product/index

150613:
//jquery android toast.

http://localhost:8085/index.php?r=sale%2Fproduct%2Fview&id=4

&XDEBUG_SESSION_START=ECLIPSE_DBGP&KEY=14340830204631

update t_delivery_type set code = 'shunfeng' where id = 1;
insert into t_delivery_type(code,name,status)values('debangwuliu','德邦物流',1);
insert into t_delivery_type(code,name,status)values('ems','EMS',1);
insert into t_delivery_type(code,name,status)values('shentong','申通快递',1);
insert into t_delivery_type(code,name,status)values('yuantong','圆通速递',1);
insert into t_delivery_type(code,name,status)values('yunda','韵达快运',1);

http://localhost:8085/index.php?r=api/notify/index
http://localhost:8085/index.php?r=api/ad-info/index
http://localhost:8085/index.php?r=api/product/index
http://localhost:8085/index.php?r=api/ad-info/ad-url&image_url=pos1.jpg
http://localhost:8085/index.php?r=api/earn-guild/index
http://localhost:8085/index.php?r=api/earn-guild/view&id=1


http://192.168.1.100:8085/index.php?r=sale%2Fvip-order%2Fconfirm&orderId=9

Yii::app()->getBaseUrl()



&XDEBUG_SESSION_START=ECLIPSE_DBGP&KEY=14345052594721

insert into t_app_release(name,upgrade_desc,ver_no,force_upgrade,app_path) values
('1.1','1.解决微信分享问题',1.1,0,'ecommerce-adr.apk');

/sale/alipay-direct/index

http://localhost:8085/index.php?r=api/api-test/index
http://localhost:8085/index.php?r=api/vip-register/ajax-index
TODO:http://localhost:8085/index.php?r=api/vip-register/check-registered
http://localhost:8085/index.php?r=api/vip-login/ajax-index
http://localhost:8085/index.php?r=api/vip-login/update-pwd



http://localhost:8085/index.php?r=sale/vip-register/index&parent_vip_no=13724346621



http://localhost:8085/index.php?r=api/download-app/view-app&app_path=ecommerce-adr.apk
http://localhost:8085/index.php?r=api/Fdownload-app/ajax-view

http://localhost:8085/index.php?r=api/product/view&id=4
http://localhost:8085/index.php?r=api/product/index
http://localhost:8085/index.php?r=api/product/index&product_name=

http://localhost:8085/index.php?r=api/sale-agreement/view
http://localhost:8085/index.php?r=api/sale-agreement/view-rights

http://localhost:8085/index.php?r=api/vip/view&id=4
http://localhost:8085/index.php?r=api/vip-bank/view&vip_id=4
http://localhost:8085/index.php?r=api/vip-bank/create
http://localhost:8085/index.php?r=api/vip-bank/update
http://localhost:8085/index.php?r=api/vip-bank/bank-list
http://localhost:8085/index.php?r=api/vip/update

http://localhost:8085/index.php?r=api/vip-income/view&vip_id=4

http://localhost:8085/index.php?r=api/vip-income-detail/view&id=4
http://localhost:8085/index.php?r=api/vip-income-detail/index&vip_id=4

http://localhost:8085/index.php?r=api/vip-withdraw-flow/index&vip_id=4
http://localhost:8085/index.php?r=api/vip-withdraw-flow/view&id=4
http://localhost:8085/index.php?r=api/vip-withdraw-flow/create

http://172.16.33.252:8085/index.php?r=api/vip/children&vip_id=1

http://172.16.33.252:8085/index.php?r=api/vip-order/group-index&vip_id=1
http://172.16.33.252:8085/index.php?r=api/vip-order/index&vip_id=18

http://172.16.33.252:8085/index.php?r=/api/sms/create

&XDEBUG_SESSION_START=ECLIPSE_DBGP&KEY=14346768324271


